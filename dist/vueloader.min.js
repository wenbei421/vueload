(function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.vueload=e()})(this,function(){var t=1e8;return Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,i.prototype=new o,i}),vueload=function(e,n){vueload.endWith=function(t,e){var n=new RegExp(e+"$");return n.test(t)},vueload.load=function(t,e){return function(){return new this.component(e,this).load(t).then(function(t){return t.compile()}).then(function(t){var e=null!==t._script?t._script.module.exports:{};return null!==t._template&&(e.template=t._template.getContent()),void 0===e.name&&void 0!==t.name&&(e.name=t.name),e._baseURI=t.baseURI,e})}.bind(this)},vueload.require=function(t){return window[t]},vueload.extend=function(t,e){for(var n in e)t[n]=e[n];return t},vueload.ajax=function(t){function e(){var t=!1;if(window.XMLHttpRequest)t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml");else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiceXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t}return new Promise(function(n,o){_option=this.extend({method:"GET",contentType:"text/xml; charset=UTF-8",timeout:0,url:"",async:!0,data:null},t);try{var i=e();_option.timeout>0&&(i.timeout=_option.timeout);var s=[];for(var r in _option.data)s.push(r+"="+_option.data[r]);var a=s.join("&");"POST"===_option.method.toUpperCase()?(i.open(_option.method,_option.url,_option.async),i.setRequestHeader("Content-Type",_option.contentType),i.send(a)):"GET"===_option.method.toUpperCase()&&(i.open(_option.method,_option.url+(a?"?"+a:""),_option.async),i.send(null))}catch(t){o(i,t)}i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)try{n(i)}catch(t){o(i,t)}else o(i,null)}}.bind(this))},vueload.parseURL=function(t){var e,n,o,i;return e=t.split("?"),o=e[0],2==e.length&&(n=e[1]),i=o.substring(o.lastIndexOf("/")+1,o.length),i?this.endWith(i.toLowerCase(),".vue")?i=i.substring(0,i.lastIndexOf(".")):o+=".vue":(i=o.substring(0,o.length-1),i=i.substring(i.lastIndexOf("/")+1,i.length),o+="index.vue"),{name:i,url:o+(n?"?"+n:"")}},vueload.resolveURL=function(t,e){return"./"===e.substr(0,2)||"../"===e.substr(0,3)?t+e:e},vueload.register=function(t,e){var n=this.parseURL(e);t.component(n.name,this.load(n.url))},vueload.install=function(t){t.mixin({beforeCreate:function(){var e=this.$options.components;for(var n in e)if("string"==typeof e[n]&&"url:"===e[n].substr(0,4)){var o=parseComponentURL(e[n].substr(4)),i="_baseURI"in this.$options?this.resolveURL(this.$options._baseURI,o.url):o.url;isNaN(n)?e[n]=vueload.load(i,n):e[n]=t.component(o.name,vueload.load(i,o.name))}}})},vueload.component=function(n,o){this.name=n,this.vueload=o,this._template=null,this._script=null,this._styles=[],this._scopeId="",this.style=function(t,e){this.component=t,this.element=e,this.withBase=function(t){var e;if(this.component.baseURI){e=document.createElement("base"),e.href=this.component.baseURI;var n=this.component.getHead();n.insertBefore(e,n.firstChild)}t.call(this),e&&this.component.getHead().removeChild(e)},this.scopeStyles=function(t,e){function n(){for(var n=t.sheet,o=n.cssRules,i=0;i<o.length;++i){var s=o[i];if(1===s.type){var r=[];s.selectorText.split(/\s*,\s*/).forEach(function(t){r.push(e+" "+t);var n=t.match(/([^ :]+)(.+)?/);r.push(n[1]+e+(n[2]||""))});var a=r.join(",")+s.cssText.substr(s.selectorText.length);n.deleteRule(i),n.insertRule(a,i)}}}try{n()}catch(e){if(e instanceof DOMException&&e.code===DOMException.INVALID_ACCESS_ERR)return t.sheet.disabled=!0,void t.addEventListener("load",function e(){t.removeEventListener("load",e),setTimeout(function(){n(),t.sheet.disabled=!1})});throw e}},this.compile=function(){var t=null!==this.component._template,e=this.element.hasAttribute("scoped");if(e){if(!t)return;this.element.removeAttribute("scoped")}return this.withBase(function(){this.component.getHead().appendChild(this.element)}),e&&this.scopeStyles(this.element,"["+this.component.getScopeId()+"]"),Promise.resolve()},this.getContent=function(){return this.element.textContent},this.setContent=function(t){this.withBase(function(){this.element.textContent=t})}},this.template=function(t,e){this.component=t,this.element=e,this.content=this.component.responseText.match(/<template>([\s\S]*?)<\/template>/)[1],this.getContent=function(){return this.content},this.setContent=function(t){this.content=t},this.addScopeId=function(t){for(var e=0,n=0,o=!1,i="";e<this.content.length;)if("<"==this.content[e]||0!=o){if(o=!0){if(" "==this.content[e]||"\n"==this.content[e]||"\r"==this.content[e]){n=e,o=!1;break}i+=this.content[e]}e++}else e++;this.content=i+" "+t+this.content.substring(n)},this.compile=function(){return Promise.resolve()}},this.script=function(t,n){this.component=t,this.element=n,this.module={exports:{}},this.getContent=function(){return this.element.textContent},this.setContent=function(t){this.element.textContent=t},this.compile=function(){var t=function(t){return this.component.vueload.require(this.component.vueload.resolveURL(this.component.baseURI,t))}.bind(this),n=function(t,e){return this.component.vueload(this.component.vueload.resolveURL(this.component.baseURI,t),e)}.bind(this);try{Function("exports","require","vueload","module",this.getContent()).call(this.module.exports,this.module.exports,t,n,this.module)}catch(t){if(!("lineNumber"in t))return Promise.reject(t);var o=this.component.responseText.replace(/\r?\n/g,"\n"),i=o.substr(0,o.indexOf(script)).split("\n").length+t.lineNumber-1;throw new t.constructor(t.message,e,i)}return Promise.resolve(this.module.exports)}},this.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},this.getScopeId=function(){return""===this._scopeId&&(this._scopeId="data-v-"+(t++).toString(36),this._template.addScopeId(this._scopeId)),this._scopeId},this.load=function(t){return this.vueload.ajax({url:t}).then(function(e){this.responseText=e.responseText,this.baseURI=t.substr(0,t.lastIndexOf("/")+1);var n=document.implementation.createHTMLDocument("");n.body.innerHTML=(this.baseURI?'<base href="'+this.baseURI+'">':"")+this.responseText;for(var o=n.body.firstChild;o;o=o.nextSibling)switch(o.nodeName.toUpperCase()){case"TEMPLATE":this._template=new this.template(this,o);break;case"SCRIPT":this._script=new this.script(this,o);break;case"STYLE":this._styles.push(new this.style(this,o))}return this}.bind(this)).catch(function(t){return console.error("[vueload error]: "+t.message+t.stack),this}.bind(this))},this.compile=function(){return Promise.all(Array.prototype.concat(this._script&&this._script.compile(),this._styles.map(function(t){return t.compile()}),this._template&&this._template.compile())).then(function(){return this}.bind(this))}};var o=vueload.parseURL(e);return vueload.load(o.url,n||o.name)},vueload});